<html>
<body>
    aoc184
    <canvas id="Canvas1" width="2500" height="2500" style="border: 1px solid black;">
<script>
var c1 = document.getElementById("Canvas1");
var ct1 = c1.getContext("2d");
    var ins=[], grid=[],disp=[],step=[],walk=[]
    var proc
  fileLoad();
    async function fileLoad() {
  try {
    const response = await fetch('info18.txt');
    var data = await response.text();
   
    ins = data.split('\n');
  } catch (error) {
    alert('Error reading file:'+error);
  }
    //    alert("lines read ="+ins.length)
     start()
    }
 var sc=5,max=600,q=0,floodc=1
var x=400,y=320
    var fillx=x+1,filly=y+1
function start(){    
display()
}
    
function display(){
    var instr=[]
  
    for(k=0;k<max;k++){
        grid[k]=Array(max).fill(".")
    }
    grid[y][x]="#"
    
    for(k=0;k<ins.length-1;k++){
      instr=ins[k].split(" ")
      walk[k]=instr[0]
      step[k]=instr[1]
    }
    next()
}
function next(){
    
     // ct1.fillText(walk[k]+".."+step[k], 10, 15+sc*k)
     for(z=0; z<+step[q];z++){
        if(walk[q]=="R"){x++}
        if(walk[q]=="L"){x--}
        if(walk[q]=="D"){y++}
        if(walk[q]=="U"){y--}
        grid[y][x]="#"
         floodc++
        }
    if(q%100==0){show();ct1.fillText(q,0,10)}
    
    q++
       if(q<walk.length){setTimeout(next,10)}
    else{show();alert("finished"); setTimeout(fill,400) }
    }
         
  

function show(){
     ct1.clearRect(0,0,1200,1200)
    
    ct1.font="10px Monospace"
    ct1.fillText(floodc,0,10)
    ct1.font="5px Monospace"
    for(n=0;n<max;n++){
        for(m=0;m<max;m++){
            ct1.fillText(grid[n][m], n*sc,12+m*sc)
        }
    }
}
function fill(){
    flood(fillx,filly)
    setInterval(show,1500)
}
function flood(a,b){
    if(grid[b][a]!="."){return}
    grid[b][a]="1"
    floodc++
    setTimeout(function(){flood(a+1,b)},10)
    setTimeout(function(){flood(a-1,b)},10)
    setTimeout(function(){flood(a,b+1)},10)
    setTimeout(function(){flood(a,b-1)},10)
}
</script>
</body>
</html>
